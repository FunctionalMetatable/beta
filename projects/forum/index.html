---
layout: default
title: Forum New Post Notifier
---

<input id="CurrentForum" type="number" />
<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<!-- SweetAlert YAY -->
<script>
  if (!("Notification" in window)) {
    Swal.fire({
      title: "Error",
      text: "It looks like your browser doesn't support notifications :(",
      icon: 'error',
      confirmButtonText: "RIP"
    })
  } else if (Notification.permission === "granted") {
    Swal.fire({
      title: "Success",
      text: "We have successfully got permissions to send notifications! :D",
      icon: 'success',
      confirmButtonText: "Let's go!"
    })
    loop()
  } else {
    Swal.fire({
      title: "Error",
      text: "It looks like we can't send notifications to you. Try enabling notifications.",
      icon: 'error',
      confirmButtonText: 'Ok'
    })
  }
  
  function loop() {
    var current = Number(document.getElementById("CurrentForum"));
    fetch(`https://scratch.mit.edu/discuss/feeds/forum/${current}`)
      .catch((err) => {
        Swal.fire(
          "There's something wrong with the GET script. Please comment the following on 9gr's profile: " +
            err
        );
        throw err; // to stop the script from running
      })
      .then((response) => {
        var dom = new DOMParser()
        dom.parseFromString(response.text(), "application/xml")
        Notification
        setTimeout(1000, loop);
      });
  }
</script>
