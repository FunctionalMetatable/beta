<!DOCTYPE html>
<html>
  <head>
    <title>Scratch Player</title>
    <meta
      name="description"
      content="A simple scratch player with an option to choose different mods."
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body style="overflow: hidden; margin: 0">
    <script type="text/javascript">
      import meta from "/assets/meta.js"
      const main = new meta(document, window)
      // Syntax:
      // ?mod=<scratch mod>&id=<project id>
      // Types of mod: tw = turbowarp, s = scratch, fp = forkphorus, ep = epicques
      function load(projectId, mod) {
        let ifr = document.createElement("iframe");
        ifr.style =
          "width: 100%; height: 100%; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%)";

        if (mod == "s") {
          ifr.src = `https://scratch.mit.edu/projects/${projectId}/embed`;
        } else if (mod == "tw") {
          ifr.src = `https://turbowarp.org/${projectId}/embed`;
        } else if (mod == "fp") {
          ifr.src = `https://forkphorus.github.io/app.html#${projectId}`;
        } else if (mod == "ep") {
          ifr.src = `https://sheeptester.github.io/scratch-gui#${projectId}`;
        } else {
          window.location.href = "/error";
        }

        document.body.appendChild(ifr);
      }

      let u = new URLSearchParams(new URL(window.location).search.substring(1));

      load(u.get("id"), u.get("mod"));
    </script>
  </body>
</html>
