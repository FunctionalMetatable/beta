<!DOCTYPE html>
<html>
  <head>
    <script>
      var urlData = new URL(window.location);
      var searchParams = new URLSearchParams(
        urlData.search.substring(1) || "fwd=null"
      );
      let code = searchParams.get("fwd");
      function goTo404() {
        var ifr = document.createElement("iframe");
        ifr.src = "/404";
        ifr.width = "100%";
        ifr.height = "100%";
        ifr.style =
          "position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width:100%; height:100%;";
        document.body.style = "margin:0;";
        document.body.appendChild(ifr);
      }
      fetch("https://functionalmetatable.github.io/assets/redir.json")
        .catch((e) => {
          goTo404();
        })
        .then((e) => e.json())
        .then((data) => {
          if (data[code]) {
            window.location.href = data[code];
          } else {
            goTo404();
          }
        });
    </script>
  </head>
</html>
